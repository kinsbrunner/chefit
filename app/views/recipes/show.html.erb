<%= render 'shared/page_title', title: @recipe.name.capitalize %>

<div class="well col-md-8 offset-md-2">
  <h4 class="center description"><strong>Steps:</strong></h4>
  <hr />
  <%= simple_format(@recipe.description) %>
  <hr />
  <% if @recipe.ingredients.any? %>
    <p>Ingredients: <%= render @recipe.ingredients %></p>
  <% end %>
  <p class="center">
    <%= link_to gravatar_for(@recipe.chef), chef_path(@recipe.chef) %>
  </p>
  <p class="center"><small>Created by: <%= @recipe.chef.chefname %> (<%= time_ago_in_words(@recipe.created_at) %> ago)</small></p>
  <div class="recipe-actions">
    <% if logged_in? && (current_chef == @recipe.chef || current_chef.admin?) %>
      <%= link_to 'Edit Recipe', edit_recipe_path(@recipe), class: 'btn btn-sm btn-warning' %>
      <%= link_to 'Delete Recipe', recipe_path(@recipe), method: :delete, 
                                                         data: { confirm: 'Are you sure you want to delete this recipe?' },
                                                         class: 'btn btn-sm btn-danger' %>
    <% end %>
    <%= link_to 'Return to Recipes list', recipes_path, class: 'btn btn-sm btn-primary' %>
  </div>
</div>

<% if logged_in? %>
  <%= render 'comments/form', recipe: @recipe, comment: @comment %>
<% end %>

<% if @recipe.comments.count != 0 %>
  <div class="row">
    <div class="col-md-8 offset-md-2">
      <h3>Previous comments:</h3>
      <div id="messages">
        <%= render partial: 'comments/comments', object: @comments %>
      </div>
    </div>
  </div>
<% else %>
  <div class="row">
    <div class="col-md-8 offset-md-2">
      <h3>No comments yet!</h3>
    </div>
  </div>
<% end %>